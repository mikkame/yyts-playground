<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>わいわいPlayground</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ace.js" integrity="sha256-CVkji/u32aj2TeC+D13f7scFSIfphw2pmu4LaKWMSY8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/mode-typescript.js" integrity="sha256-7e1Z0n9zf6TMKFVnGwbQk5neHFgkSWbW1o0bvBLdxYw=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/theme-monokai.js" integrity="sha256-Fc4eJOe8KtF8kDLqSR94vUiJ1ohvKDxznSMxI3RavOw=" crossorigin="anonymous"></script>

</head>
<body>
  <div id="app">
    <div id="editor">const welcomeMessage: string = 'hello world';
console.log(welcomeMessage)
    </div>
    <div id="result">
    <iframe src="result.html" id="iframe"></iframe>
    <button id="play">実行</button>
    </div>
  </div>

  <script>
      var editor = ace.edit("editor");
      editor.setTheme("ace/theme/monokai");
      editor.session.setMode("ace/mode/typescript");

      var play = document.getElementById('play');
      var iframe = document.getElementById('iframe').contentWindow;
      play.addEventListener('click', function () {
        iframe.postMessage(editor.getValue(), '*');
      })
  </script>
  <style>
    #editor {
      height: 100vh;
      width: 50%;
      float:left;
    }
    #result iframe {
      width: 100%;
      float: left;
      height: 100vh;
    }
    #result {
      width: 50%;
      float: left;
      position: relative;;
    }
    #play {
      position: absolute;
      top:10px;
      right:10px;
    }
    html,body {
      height: 100vh;
      width: 100%;
      padding: 0;
      margin:0;
    }
  </style>
</body>
</html>
